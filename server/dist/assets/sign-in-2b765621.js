import{u as j,r as o,A as b,j as e,m as y,E as _,a as v,S,b as q,c as C,B as k,L as I,s as F}from"./index-39117c0d.js";import{v as g}from"./v4-a960c1f4.js";const E="_sign-in-form_1hi1q_1",P="_forgot-password_1hi1q_85",M="_google-sign-in_1hi1q_105",l={"sign-in-form":"_sign-in-form_1hi1q_1",signInForm:E,"forgot-password":"_forgot-password_1hi1q_85",forgotPassword:P,"google-sign-in":"_google-sign-in_1hi1q_105",googleSignIn:M},p={email$alias:"",password:"",rememberMe:!1},D=()=>{const u=j(),{dispatch:c}=o.useContext(b),[a,r]=o.useState(p),[d,m]=o.useState({verifying:!1}),[t,h]=o.useState(!1);async function x(i){m(s=>({...s,verifying:!0})),i.preventDefault();try{const s=await F.verify(a);c(n=>({...n,user:s,notifs:n.notifs.concat({message:"Sign in successful",color:"success",id:g()})})),r(p),u("/",{replace:!0})}catch({message:s}){c(n=>({...n,notifs:n.notifs.concat({message:s,color:"error",id:g()})})),m(n=>({...n,verifying:!1}))}}function f(){}const w={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1},exit:{x:"-100%",opacity:0}};return e.jsxs(y.main,{variants:w,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("form",{className:l.signInForm,action:"/sign-in",method:"post",onSubmit:x,children:[e.jsx("h1",{children:"welcome back"}),e.jsx("p",{children:"please enter your details."}),e.jsxs("label",{htmlFor:"user-id",children:[e.jsx("input",{type:"text",name:"username_email",id:"user-id",onChange:i=>r(s=>({...s,email$alias:i.target.value})),value:a.email$alias,required:!a.email$alias.trim(),autoComplete:"username"}),e.jsx("span",{children:"email | alias"})]}),e.jsxs("label",{htmlFor:"user-password",children:[e.jsx("input",{type:t?"text":"password",name:"user_password",id:"user-password",onChange:i=>r(s=>({...s,password:i.target.value})),value:a.password,required:!a.password.trim(),autoComplete:"current-password"}),e.jsx("span",{children:"password"}),e.jsx("button",{type:"button",onClick:()=>h(i=>!i),"aria-label":t?"hide password":"show password",children:t?e.jsx(_,{}):e.jsx(v,{})})]}),e.jsxs("label",{htmlFor:"remember-me",children:[e.jsx("input",{type:"checkbox",name:"remember_me",id:"remember-me",checked:a.rememberMe,onChange:i=>r(s=>({...s,rememberMe:i.target.checked}))}),a.rememberMe?e.jsx(S,{}):e.jsx(q,{}),e.jsx("span",{children:"Remember me for 30 days"})]}),e.jsx("a",{href:"/forgot-password",target:"_blank",rel:"noopener noreferrer",className:l.forgotPassword,children:"Forgot password"}),e.jsx("button",{type:"submit",disabled:d.verifying,children:d.verifying?e.jsx(C,{width:18}):"sign in"}),e.jsxs("button",{type:"button",onClick:f,className:l.googleSignIn,children:[e.jsx(k,{}),e.jsx("span",{children:"Sign in with Google"})]})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(I,{to:"/sign-up",children:"sign up"})]})]})};export{D as default};
