import{d as Vt,P as H,r as R,A as Ge,j as r,H as Zt,e as Kt,T as Jt,f as Qt,g as en,h as tn,X as nn,i as on,c as yt,k as an,M as sn,l as rn,L as ln,U as cn}from"./index-a260022a.js";import{u as un,g as fn}from"./user-672a468a.js";import{v as P}from"./v4-a960c1f4.js";const Ye=Vt.create({baseURL:"/api/blogs"});async function mn(){const{data:o}=await Ye.get("/");return o}async function dn(o){const n=localStorage.getItem("bloglist");if(n){const{token:l}=JSON.parse(n),{data:i}=await Ye.post("/",o,{headers:{Authorization:`Bearer ${l}`}});return i}}async function me(o,n){const l=localStorage.getItem("bloglist");if(l){const{token:i}=JSON.parse(l),{data:f}=await Ye.patch(`/${o}`,n,{headers:{Authorization:`Bearer ${i}`}});return f}}const pn="_blog_fmaa2_1",hn="_blog-title_fmaa2_15",_n="_blog-doohickeys_fmaa2_35",Tn="_fave-toggle-btn_fmaa2_39",gn="_blog-thumbnail_fmaa2_57",En="_btn-wrapper_fmaa2_62",bn="_blog-content_fmaa2_79",J={blog:pn,"blog-title":"_blog-title_fmaa2_15",blogTitle:hn,"blog-doohickeys":"_blog-doohickeys_fmaa2_35",blogDoohickeys:_n,"fave-toggle-btn":"_fave-toggle-btn_fmaa2_39",faveToggleBtn:Tn,"blog-thumbnail":"_blog-thumbnail_fmaa2_57",blogThumbnail:gn,"btn-wrapper":"_btn-wrapper_fmaa2_62",btnWrapper:En,"blog-content":"_blog-content_fmaa2_79",blogContent:bn},Rt=({blog:o})=>{let n=null;const l=localStorage.getItem("bloglist");l&&(n=JSON.parse(l).id);const{dispatch:i}=R.useContext(Ge),{homeStates:f,homeDispatch:m}=R.useContext(ie);async function h(){try{const{favorites:_}=await un({favorites:f.faves.includes(o.id)?f.faves.filter(c=>c!==o.id):[...f.faves,o.id]});m(c=>({...c,faves:_})),i(c=>({...c,notifs:c.notifs.concat({message:_.includes(o.id)?"Blog added to favorites":"Blog removed from favorites",color:"info",id:P()})}))}catch({message:_}){i(c=>({...c,notifs:c.notifs.concat({message:_,color:"error",id:P()})}))}}function U(){if(o.likes.includes(n))me(o.id,{userId:n,updatedProps:{likes:o.likes.filter(_=>_!==n)}}).then(({likes:_})=>m(c=>({...c,blogs:c.blogs.map(d=>d.id===o.id?{prvBlog:d,likes:_}:d)}))).catch(({message:_})=>i(c=>({...c,notifs:c.notifs.concat({message:_,color:"error",id:P()})})));else{const _={likes:[...o.likes,n]};o.dislikes.includes(n)&&(_.dislikes=o.dislikes.filter(c=>c!==n)),me(o.id,{userId:n,updatedProps:_}).then(({likes:c,dislikes:d})=>m(E=>({...E,blogs:E.blogs.map(w=>w.id===o.id?{...w,likes:c,dislikes:d}:w)}))).catch(({message:c})=>i(d=>({...d,notifs:d.notifs.concat({message:c,color:"error",id:P()})})))}}async function L(){if(o.dislikes.includes(n))try{const{dislikes:_}=await me(o.id,{userId:n,updatedProps:{dislikes:o.dislikes.filter(c=>c!==n)}});m(c=>({...c,blogs:c.blogs.map(d=>d.id===o.id?{...d,dislikes:_}:d)}))}catch({message:_}){i(c=>({...c,notifs:c.notifs.concat({message:_,color:"error",id:P()})}))}else{const _={dislikes:[...o.dislikes,n]};o.likes.includes(n)&&(_.likes=o.likes.filter(c=>c!==n)),me(o.id,{userId:n,updatedProps:_}).then(({likes:c,dislikes:d})=>m(E=>({...E,blogs:E.blogs.map(w=>w.id===o.id?{...w,likes:c,dislikes:d}:w)}))).catch(({message:c})=>i(d=>({...d,notifs:d.notifs.concat({message:c,color:"error",id:P()})})))}}return r.jsxs("article",{className:`${J.blog} blog-${o.id}`,children:[r.jsx("p",{className:J.blogTitle,children:o.title}),r.jsxs("div",{className:J.blogDoohickeys,children:[r.jsx("div",{className:J.faveToggleBtn,children:r.jsx("button",{"aria-label":f.faves.includes(o.id)?"remove from favorites":"add to favoriites",onClick:h,children:f.faves.includes(o.id)?r.jsx(Zt,{}):r.jsx(Kt,{})})}),o.thumbnail&&r.jsx("img",{className:J.blogThumbnail,src:o.thumbnail,alt:`thumbnail for blog titled: ${o.title}`}),r.jsxs("div",{className:J.btnWrapper,children:[r.jsx("button",{type:"button","aria-label":o.likes.includes(n)?"Unlike":"Like",onClick:U,children:o.likes.includes(n)?r.jsx(Jt,{}):r.jsx(Qt,{})}),r.jsx("button",{type:"button","aria-label":o.dislikes.includes(n)?"Remove dislike":"Disike",onClick:L,children:o.dislikes.includes(n)?r.jsx(en,{}):r.jsx(tn,{})})]})]})]})};Rt.propTypes={blog:H.object.isRequired};/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:xt,setPrototypeOf:ht,isFrozen:An,getPrototypeOf:Sn,getOwnPropertyDescriptor:yn}=Object;let{freeze:N,seal:k,create:Rn}=Object,{apply:He,construct:ze}=typeof Reflect<"u"&&Reflect;He||(He=function(n,l,i){return n.apply(l,i)});N||(N=function(n){return n});k||(k=function(n){return n});ze||(ze=function(n,l){return new n(...l)});const xn=I(Array.prototype.forEach),_t=I(Array.prototype.pop),oe=I(Array.prototype.push),he=I(String.prototype.toLowerCase),ke=I(String.prototype.toString),Nn=I(String.prototype.match),C=I(String.prototype.replace),wn=I(String.prototype.indexOf),Dn=I(String.prototype.trim),D=I(RegExp.prototype.test),ae=Ln(TypeError);function I(o){return function(n){for(var l=arguments.length,i=new Array(l>1?l-1:0),f=1;f<l;f++)i[f-1]=arguments[f];return He(o,n,i)}}function Ln(o){return function(){for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return ze(o,l)}}function u(o,n,l){var i;l=(i=l)!==null&&i!==void 0?i:he,ht&&ht(o,null);let f=n.length;for(;f--;){let m=n[f];if(typeof m=="string"){const h=l(m);h!==m&&(An(n)||(n[f]=h),m=h)}o[m]=!0}return o}function Q(o){const n=Rn(null);for(const[l,i]of xt(o))n[l]=i;return n}function de(o,n){for(;o!==null;){const i=yn(o,n);if(i){if(i.get)return I(i.get);if(typeof i.value=="function")return I(i.value)}o=Sn(o)}function l(i){return console.warn("fallback value for",i),null}return l}const Tt=N(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ve=N(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Me=N(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),On=N(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Pe=N(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),In=N(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gt=N(["#text"]),Et=N(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ue=N(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bt=N(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pe=N(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Cn=k(/\{\{[\w\W]*|[\w\W]*\}\}/gm),kn=k(/<%[\w\W]*|[\w\W]*%>/gm),vn=k(/\${[\w\W]*}/gm),Mn=k(/^data-[\-\w.\u00B7-\uFFFF]/),Pn=k(/^aria-[\-\w]+$/),Nt=k(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Un=k(/^(?:\w+script|data):/i),Fn=k(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wt=k(/^html$/i);var At=Object.freeze({__proto__:null,MUSTACHE_EXPR:Cn,ERB_EXPR:kn,TMPLIT_EXPR:vn,DATA_ATTR:Mn,ARIA_ATTR:Pn,IS_ALLOWED_URI:Nt,IS_SCRIPT_OR_DATA:Un,ATTR_WHITESPACE:Fn,DOCTYPE_NAME:wt});const jn=()=>typeof window>"u"?null:window,Hn=function(n,l){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let i=null;const f="data-tt-policy-suffix";l&&l.hasAttribute(f)&&(i=l.getAttribute(f));const m="dompurify"+(i?"#"+i:"");try{return n.createPolicy(m,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}};function Dt(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jn();const n=s=>Dt(s);if(n.version="3.0.5",n.removed=[],!o||!o.document||o.document.nodeType!==9)return n.isSupported=!1,n;const l=o.document,i=l.currentScript;let{document:f}=o;const{DocumentFragment:m,HTMLTemplateElement:h,Node:U,Element:L,NodeFilter:_,NamedNodeMap:c=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:d,DOMParser:E,trustedTypes:w}=o,Y=L.prototype,Ot=de(Y,"cloneNode"),It=de(Y,"nextSibling"),Ct=de(Y,"childNodes"),_e=de(Y,"parentNode");if(typeof h=="function"){const s=f.createElement("template");s.content&&s.content.ownerDocument&&(f=s.content.ownerDocument)}let x,ee="";const{implementation:Te,createNodeIterator:kt,createDocumentFragment:vt,getElementsByTagName:Mt}=f,{importNode:Pt}=l;let v={};n.isSupported=typeof xt=="function"&&typeof _e=="function"&&Te&&Te.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ge,ERB_EXPR:Ee,TMPLIT_EXPR:be,DATA_ATTR:Ut,ARIA_ATTR:Ft,IS_SCRIPT_OR_DATA:jt,ATTR_WHITESPACE:qe}=At;let{IS_ALLOWED_URI:$e}=At,b=null;const Xe=u({},[...Tt,...ve,...Me,...Pe,...gt]);let A=null;const Ve=u({},[...Et,...Ue,...bt,...pe]);let g=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,Ae=null,Ze=!0,Se=!0,Ke=!1,Je=!0,q=!1,z=!1,ye=!1,Re=!1,$=!1,se=!1,re=!1,Qe=!0,et=!1;const Ht="user-content-";let xe=!0,ne=!1,X={},V=null;const tt=u({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nt=null;const ot=u({},["audio","video","img","source","image","track"]);let Ne=null;const at=u({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),le="http://www.w3.org/1998/Math/MathML",ce="http://www.w3.org/2000/svg",F="http://www.w3.org/1999/xhtml";let Z=F,we=!1,De=null;const zt=u({},[le,ce,F],ke);let W;const Wt=["application/xhtml+xml","text/html"],Bt="text/html";let S,K=null;const Gt=f.createElement("form"),it=function(e){return e instanceof RegExp||e instanceof Function},Le=function(e){if(!(K&&K===e)){if((!e||typeof e!="object")&&(e={}),e=Q(e),W=Wt.indexOf(e.PARSER_MEDIA_TYPE)===-1?W=Bt:W=e.PARSER_MEDIA_TYPE,S=W==="application/xhtml+xml"?ke:he,b="ALLOWED_TAGS"in e?u({},e.ALLOWED_TAGS,S):Xe,A="ALLOWED_ATTR"in e?u({},e.ALLOWED_ATTR,S):Ve,De="ALLOWED_NAMESPACES"in e?u({},e.ALLOWED_NAMESPACES,ke):zt,Ne="ADD_URI_SAFE_ATTR"in e?u(Q(at),e.ADD_URI_SAFE_ATTR,S):at,nt="ADD_DATA_URI_TAGS"in e?u(Q(ot),e.ADD_DATA_URI_TAGS,S):ot,V="FORBID_CONTENTS"in e?u({},e.FORBID_CONTENTS,S):tt,te="FORBID_TAGS"in e?u({},e.FORBID_TAGS,S):{},Ae="FORBID_ATTR"in e?u({},e.FORBID_ATTR,S):{},X="USE_PROFILES"in e?e.USE_PROFILES:!1,Ze=e.ALLOW_ARIA_ATTR!==!1,Se=e.ALLOW_DATA_ATTR!==!1,Ke=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Je=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,q=e.SAFE_FOR_TEMPLATES||!1,z=e.WHOLE_DOCUMENT||!1,$=e.RETURN_DOM||!1,se=e.RETURN_DOM_FRAGMENT||!1,re=e.RETURN_TRUSTED_TYPE||!1,Re=e.FORCE_BODY||!1,Qe=e.SANITIZE_DOM!==!1,et=e.SANITIZE_NAMED_PROPS||!1,xe=e.KEEP_CONTENT!==!1,ne=e.IN_PLACE||!1,$e=e.ALLOWED_URI_REGEXP||Nt,Z=e.NAMESPACE||F,g=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(g.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(g.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(g.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(Se=!1),se&&($=!0),X&&(b=u({},[...gt]),A=[],X.html===!0&&(u(b,Tt),u(A,Et)),X.svg===!0&&(u(b,ve),u(A,Ue),u(A,pe)),X.svgFilters===!0&&(u(b,Me),u(A,Ue),u(A,pe)),X.mathMl===!0&&(u(b,Pe),u(A,bt),u(A,pe))),e.ADD_TAGS&&(b===Xe&&(b=Q(b)),u(b,e.ADD_TAGS,S)),e.ADD_ATTR&&(A===Ve&&(A=Q(A)),u(A,e.ADD_ATTR,S)),e.ADD_URI_SAFE_ATTR&&u(Ne,e.ADD_URI_SAFE_ATTR,S),e.FORBID_CONTENTS&&(V===tt&&(V=Q(V)),u(V,e.FORBID_CONTENTS,S)),xe&&(b["#text"]=!0),z&&u(b,["html","head","body"]),b.table&&(u(b,["tbody"]),delete te.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw ae('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ae('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=e.TRUSTED_TYPES_POLICY,ee=x.createHTML("")}else x===void 0&&(x=Hn(w,i)),x!==null&&typeof ee=="string"&&(ee=x.createHTML(""));N&&N(e),K=e}},st=u({},["mi","mo","mn","ms","mtext"]),rt=u({},["foreignobject","desc","title","annotation-xml"]),Yt=u({},["title","style","font","a","script"]),ue=u({},ve);u(ue,Me),u(ue,On);const Oe=u({},Pe);u(Oe,In);const qt=function(e){let t=_e(e);(!t||!t.tagName)&&(t={namespaceURI:Z,tagName:"template"});const a=he(e.tagName),p=he(t.tagName);return De[e.namespaceURI]?e.namespaceURI===ce?t.namespaceURI===F?a==="svg":t.namespaceURI===le?a==="svg"&&(p==="annotation-xml"||st[p]):!!ue[a]:e.namespaceURI===le?t.namespaceURI===F?a==="math":t.namespaceURI===ce?a==="math"&&rt[p]:!!Oe[a]:e.namespaceURI===F?t.namespaceURI===ce&&!rt[p]||t.namespaceURI===le&&!st[p]?!1:!Oe[a]&&(Yt[a]||!ue[a]):!!(W==="application/xhtml+xml"&&De[e.namespaceURI]):!1},B=function(e){oe(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch{e.remove()}},Ie=function(e,t){try{oe(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch{oe(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is"&&!A[e])if($||se)try{B(t)}catch{}else try{t.setAttribute(e,"")}catch{}},lt=function(e){let t,a;if(Re)e="<remove></remove>"+e;else{const O=Nn(e,/^[\r\n\t ]+/);a=O&&O[0]}W==="application/xhtml+xml"&&Z===F&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const p=x?x.createHTML(e):e;if(Z===F)try{t=new E().parseFromString(p,W)}catch{}if(!t||!t.documentElement){t=Te.createDocument(Z,"template",null);try{t.documentElement.innerHTML=we?ee:p}catch{}}const y=t.body||t.documentElement;return e&&a&&y.insertBefore(f.createTextNode(a),y.childNodes[0]||null),Z===F?Mt.call(t,z?"html":"body")[0]:z?t.documentElement:y},ct=function(e){return kt.call(e.ownerDocument||e,e,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},$t=function(e){return e instanceof d&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof c)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},fe=function(e){return typeof U=="object"?e instanceof U:e&&typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string"},j=function(e,t,a){v[e]&&xn(v[e],p=>{p.call(n,t,a,K)})},ut=function(e){let t;if(j("beforeSanitizeElements",e,null),$t(e))return B(e),!0;const a=S(e.nodeName);if(j("uponSanitizeElement",e,{tagName:a,allowedTags:b}),e.hasChildNodes()&&!fe(e.firstElementChild)&&(!fe(e.content)||!fe(e.content.firstElementChild))&&D(/<[/\w]/g,e.innerHTML)&&D(/<[/\w]/g,e.textContent))return B(e),!0;if(!b[a]||te[a]){if(!te[a]&&mt(a)&&(g.tagNameCheck instanceof RegExp&&D(g.tagNameCheck,a)||g.tagNameCheck instanceof Function&&g.tagNameCheck(a)))return!1;if(xe&&!V[a]){const p=_e(e)||e.parentNode,y=Ct(e)||e.childNodes;if(y&&p){const O=y.length;for(let T=O-1;T>=0;--T)p.insertBefore(Ot(y[T],!0),It(e))}}return B(e),!0}return e instanceof L&&!qt(e)||(a==="noscript"||a==="noembed"||a==="noframes")&&D(/<\/no(script|embed|frames)/i,e.innerHTML)?(B(e),!0):(q&&e.nodeType===3&&(t=e.textContent,t=C(t,ge," "),t=C(t,Ee," "),t=C(t,be," "),e.textContent!==t&&(oe(n.removed,{element:e.cloneNode()}),e.textContent=t)),j("afterSanitizeElements",e,null),!1)},ft=function(e,t,a){if(Qe&&(t==="id"||t==="name")&&(a in f||a in Gt))return!1;if(!(Se&&!Ae[t]&&D(Ut,t))){if(!(Ze&&D(Ft,t))){if(!A[t]||Ae[t]){if(!(mt(e)&&(g.tagNameCheck instanceof RegExp&&D(g.tagNameCheck,e)||g.tagNameCheck instanceof Function&&g.tagNameCheck(e))&&(g.attributeNameCheck instanceof RegExp&&D(g.attributeNameCheck,t)||g.attributeNameCheck instanceof Function&&g.attributeNameCheck(t))||t==="is"&&g.allowCustomizedBuiltInElements&&(g.tagNameCheck instanceof RegExp&&D(g.tagNameCheck,a)||g.tagNameCheck instanceof Function&&g.tagNameCheck(a))))return!1}else if(!Ne[t]){if(!D($e,C(a,qe,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&wn(a,"data:")===0&&nt[e])){if(!(Ke&&!D(jt,C(a,qe,"")))){if(a)return!1}}}}}}return!0},mt=function(e){return e.indexOf("-")>0},dt=function(e){let t,a,p,y;j("beforeSanitizeAttributes",e,null);const{attributes:O}=e;if(!O)return;const T={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:A};for(y=O.length;y--;){t=O[y];const{name:M,namespaceURI:Ce}=t;if(a=M==="value"?t.value:Dn(t.value),p=S(M),T.attrName=p,T.attrValue=a,T.keepAttr=!0,T.forceKeepAttr=void 0,j("uponSanitizeAttribute",e,T),a=T.attrValue,T.forceKeepAttr||(Ie(M,e),!T.keepAttr))continue;if(!Je&&D(/\/>/i,a)){Ie(M,e);continue}q&&(a=C(a,ge," "),a=C(a,Ee," "),a=C(a,be," "));const pt=S(e.nodeName);if(ft(pt,p,a)){if(et&&(p==="id"||p==="name")&&(Ie(M,e),a=Ht+a),x&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!Ce)switch(w.getAttributeType(pt,p)){case"TrustedHTML":{a=x.createHTML(a);break}case"TrustedScriptURL":{a=x.createScriptURL(a);break}}try{Ce?e.setAttributeNS(Ce,M,a):e.setAttribute(M,a),_t(n.removed)}catch{}}}j("afterSanitizeAttributes",e,null)},Xt=function s(e){let t;const a=ct(e);for(j("beforeSanitizeShadowDOM",e,null);t=a.nextNode();)j("uponSanitizeShadowNode",t,null),!ut(t)&&(t.content instanceof m&&s(t.content),dt(t));j("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t,a,p,y;if(we=!s,we&&(s="<!-->"),typeof s!="string"&&!fe(s))if(typeof s.toString=="function"){if(s=s.toString(),typeof s!="string")throw ae("dirty is not a string, aborting")}else throw ae("toString is not a function");if(!n.isSupported)return s;if(ye||Le(e),n.removed=[],typeof s=="string"&&(ne=!1),ne){if(s.nodeName){const M=S(s.nodeName);if(!b[M]||te[M])throw ae("root node is forbidden and cannot be sanitized in-place")}}else if(s instanceof U)t=lt("<!---->"),a=t.ownerDocument.importNode(s,!0),a.nodeType===1&&a.nodeName==="BODY"||a.nodeName==="HTML"?t=a:t.appendChild(a);else{if(!$&&!q&&!z&&s.indexOf("<")===-1)return x&&re?x.createHTML(s):s;if(t=lt(s),!t)return $?null:re?ee:""}t&&Re&&B(t.firstChild);const O=ct(ne?s:t);for(;p=O.nextNode();)ut(p)||(p.content instanceof m&&Xt(p.content),dt(p));if(ne)return s;if($){if(se)for(y=vt.call(t.ownerDocument);t.firstChild;)y.appendChild(t.firstChild);else y=t;return(A.shadowroot||A.shadowrootmode)&&(y=Pt.call(l,y,!0)),y}let T=z?t.outerHTML:t.innerHTML;return z&&b["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&D(wt,t.ownerDocument.doctype.name)&&(T="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+T),q&&(T=C(T,ge," "),T=C(T,Ee," "),T=C(T,be," ")),x&&re?x.createHTML(T):T},n.setConfig=function(s){Le(s),ye=!0},n.clearConfig=function(){K=null,ye=!1},n.isValidAttribute=function(s,e,t){K||Le({});const a=S(s),p=S(e);return ft(a,p,t)},n.addHook=function(s,e){typeof e=="function"&&(v[s]=v[s]||[],oe(v[s],e))},n.removeHook=function(s){if(v[s])return _t(v[s])},n.removeHooks=function(s){v[s]&&(v[s]=[])},n.removeAllHooks=function(){v={}},n}var We=Dt();const zn="_input_p4mpc_1",Wn={input:zn},Be=({label:o,placeholder:n,value:l,onInput:i,...f})=>{const m=R.useRef(null);R.useEffect(()=>{m.current&&(m.current.textContent=l||"")},[l]);function h(){if(m.current){const L=We.sanitize(m.current.textContent);i(L)}}function U(L){L.key==="Enter"&&!L.shiftKey&&L.preventDefault()}return r.jsx("div",{contentEditable:!0,role:"textbox","aria-label":o,"data-placeholder":n,onInput:h,onKeyDown:U,ref:m,className:Wn.input,"aria-multiline":"true",spellCheck:!0,tabIndex:0,...f})};Be.propTypes={label:H.string,placeholder:H.string,value:H.string,onInput:H.func.isRequired};const Bn="_overlay_1k6gf_1",Gn="_content_1k6gf_15",Yn="_close-btn_1k6gf_20",Fe={overlay:Bn,content:Gn,"close-btn":"_close-btn_1k6gf_20",closeBtn:Yn},Lt=({isOpen:o,onClose:n,children:l})=>o?r.jsx("div",{className:Fe.overlay,children:r.jsxs("div",{className:Fe.content,children:[r.jsx("button",{type:"button","aria-label":"close",onClick:n,className:Fe.closeBtn,children:r.jsx(nn,{})}),l]})}):null;Lt.propTypes={isOpen:H.bool.isRequired,onClose:H.func.isRequired,children:H.node.isRequired};const qn="_form-wrapper_mv4d9_1",$n="_create-form_mv4d9_6",Xn="_field-wrapper_mv4d9_18",Vn="_content-wrapper_mv4d9_34",Zn="_choose-thumbnail_mv4d9_42",Kn="_thumbnail-preview_mv4d9_71",G={"form-wrapper":"_form-wrapper_mv4d9_1",formWrapper:qn,"create-form":"_create-form_mv4d9_6",createForm:$n,"field-wrapper":"_field-wrapper_mv4d9_18",fieldWrapper:Xn,"content-wrapper":"_content-wrapper_mv4d9_34",contentWrapper:Vn,"choose-thumbnail":"_choose-thumbnail_mv4d9_42",chooseThumbnail:Zn,"thumbnail-preview":"_thumbnail-preview_mv4d9_71",thumbnailPreview:Kn},St={title:"",content:"",thumbnail:null},Jn=()=>{const{dispatch:o}=R.useContext(Ge),{homeStates:{formIsOpen:n},homeDispatch:l}=R.useContext(ie),[i,f]=R.useState(St),[m,h]=R.useState(!1);function U(){l(c=>({...c,formIsOpen:!1}))}function L(c){c.preventDefault(),h(!0),dn(i).then(d=>{l(E=>({...E,blogs:[...E.blogs,d]})),o(E=>({...E,notifs:E.notifs.concat({message:"Blog Uploaded",color:"success",id:P()})}))}).catch(({message:d})=>o(E=>({...E,notifs:E.notifs.concat({message:d,color:"error",id:P()})}))).finally(()=>{h(!1),f(St)})}function _(c){const d=c.target.files[0],E=new FileReader;E.onload=w=>f(Y=>({...Y,thumbnail:w.target.result})),E.readAsDataURL(d)}return r.jsx(Lt,{isOpen:n,onClose:U,children:r.jsx("div",{className:G.formWrapper,children:r.jsxs("form",{action:"/upload-blog",method:"POST",encType:"multipart/form-data",onSubmit:L,className:G.createForm,children:[r.jsx("div",{className:G.fieldWrapper,children:r.jsx(Be,{label:"Title",placeholder:"title",onInput:c=>f(d=>({...d,title:c})),value:We.sanitize(i.title)})}),r.jsx("div",{className:[G.fieldWrapper,G.contentWrapper].join(" "),children:r.jsx(Be,{label:"Content",placeholder:"content",onInput:c=>f(d=>({...d,content:c})),value:We.sanitize(i.content)})}),r.jsxs("div",{className:G.chooseThumbnail,children:[r.jsxs("label",{htmlFor:"blog-thumbnail",children:[r.jsx(on,{}),i.thumbnail?"change":"pick a"," thumbnail"]}),r.jsx("input",{type:"file",accept:"image/*",name:"thumbnail",id:"blog-thumbnail",onChange:_}),i.thumbnail&&r.jsx("img",{src:i.thumbnail,alt:"Thumbnail Preview",className:G.thumbnailPreview})]}),r.jsx("button",{type:"submit",disabled:!(i.title.trim()&&i.content.trim())||m,"aria-label":"upload blog",children:m?r.jsx(yt,{width:18}):"upload"})]})})})},Qn="_toolbar_1s2nz_1",eo="_X7tY4Z_1s2nz_1",to="_X7tY4Z_1s2nz_1",no={toolbar:Qn,X7tY4Z:eo,x7TY4Z:to},oo=()=>{const{homeDispatch:o}=R.useContext(ie);return r.jsx("footer",{className:no.toolbar,children:r.jsx("button",{"aria-label":"create blog",type:"button",onClick:()=>o(n=>({...n,formIsOpen:!0})),children:r.jsx(an,{})})})},ao="_header_cq9qd_1",io="_drawer-toggler_cq9qd_19",so="_user-info_cq9qd_63",je={header:ao,"drawer-toggler":"_drawer-toggler_cq9qd_19",drawerToggler:io,"user-info":"_user-info_cq9qd_63",userInfo:so},ro=()=>{const{homeStates:{drawerIsOpen:o,searchQuery:n},homeDispatch:l}=R.useContext(ie);return r.jsxs("header",{className:je.header,children:[r.jsx("button",{type:"button",className:je.drawerToggler,onClick:()=>l(i=>({...i,drawerIsOpen:!i.drawerIsOpen})),"aria-label":o?"close side-drawer":"open side-drawer",children:r.jsx(sn,{})}),r.jsxs("label",{htmlFor:"blog-search",children:[r.jsx(rn,{}),r.jsx("input",{type:"text",id:"blog-search",value:n,onChange:i=>l(f=>({...f,searchQuery:i.target.value})),placeholder:"search"})]}),r.jsx(ln,{"aria-label":"my account",to:"/acc",className:je.userInfo,children:r.jsx(cn,{})})]})},lo="_blogs_1mcdc_1",co={blogs:lo},ie=R.createContext(null),ho=()=>{const{dispatch:o}=R.useContext(Ge);JSON.parse(localStorage.getItem("bloglist"));const[n,l]=R.useState({drawerIsOpen:!1,searchQuery:"",blogs:[],faves:[],formIsOpen:!1}),[i,f]=R.useState(!1);return R.useEffect(()=>{f(!0),mn().then(m=>l(h=>({...h,blogs:m}))).catch(({message:m})=>o(h=>({notifs:h.notifs.concat({message:m,color:["secondary","info","success","warning","error"][Math.floor(Math.random()*5)],id:P()})}))).finally(()=>f(!1))},[]),R.useEffect(()=>{fn().then(({favorites:m})=>l(h=>({...h,faves:m}))).catch(({message:m})=>{o(h=>({...h,notifs:h.notifs.concat({message:m,color:"error",id:P()})}))})},[]),r.jsxs(ie.Provider,{value:{homeStates:n,homeDispatch:l},children:[r.jsx(ro,{}),r.jsx("section",{className:co.blogs,"aria-live":"polite",children:i?r.jsx(yt,{text:"Please wait",width:40}):n.blogs.map(m=>r.jsx(Rt,{blog:m},m.id))}),r.jsx(Jn,{}),r.jsx(oo,{})]})};export{ie as HomeContext,ho as default};
