import{u as w,r,A as b,j as e,m as y,E as _,a as S,S as v,b as I,c as q,B as C,L as k,s as F}from"./index-50734658.js";import{v as g}from"./v4-a960c1f4.js";const E="_sign-in-form_1hi1q_1",N="_forgot-password_1hi1q_85",P="_google-sign-in_1hi1q_105",l={"sign-in-form":"_sign-in-form_1hi1q_1",signInForm:E,"forgot-password":"_forgot-password_1hi1q_85",forgotPassword:N,"google-sign-in":"_google-sign-in_1hi1q_105",googleSignIn:P},p={email$alias:"",password:"",rememberMe:!1},D=()=>{const u=w(),{dispatch:c}=r.useContext(b),[i,a]=r.useState(p),[m,d]=r.useState({verifying:!1}),[t,h]=r.useState(!1);function x(n){d(s=>({...s,verifying:!0})),n.preventDefault(),F(i).then(s=>{localStorage.setItem("bloggerzon",JSON.stringify(s)),a(p),c(o=>({...o,notifs:o.notifs.concat({message:"Sign in successful",color:"success",id:g()})})),u("/",{replace:!0})}).catch(({message:s})=>c(o=>({...o,notifs:o.notifs.concat({message:s,color:"error",id:g()})}))).finally(()=>d(s=>({...s,verifying:!1})))}function f(){}const j={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1},exit:{x:"-100%",opacity:0}};return e.jsxs(y.main,{variants:j,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("form",{className:l.signInForm,action:"/sign-in",method:"post",onSubmit:x,children:[e.jsx("h1",{children:"welcome back"}),e.jsx("p",{children:"please enter your details."}),e.jsxs("label",{htmlFor:"user-id",children:[e.jsx("input",{type:"text",name:"username_email",id:"user-id",onChange:n=>a(s=>({...s,email$alias:n.target.value})),value:i.email$alias,required:!i.email$alias.trim(),autoComplete:"username"}),e.jsx("span",{children:"email | alias"})]}),e.jsxs("label",{htmlFor:"user-password",children:[e.jsx("input",{type:t?"text":"password",name:"user_password",id:"user-password",onChange:n=>a(s=>({...s,password:n.target.value})),value:i.password,required:!i.password.trim(),autoComplete:"current-password"}),e.jsx("span",{children:"password"}),e.jsx("button",{type:"button",onClick:()=>h(n=>!n),"aria-label":t?"hide password":"show password",children:t?e.jsx(_,{}):e.jsx(S,{})})]}),e.jsxs("label",{htmlFor:"remember-me",children:[e.jsx("input",{type:"checkbox",name:"remember_me",id:"remember-me",checked:i.rememberMe,onChange:n=>a(s=>({...s,rememberMe:n.target.checked}))}),i.rememberMe?e.jsx(v,{}):e.jsx(I,{}),e.jsx("span",{children:"Remember me for 30 days"})]}),e.jsx("a",{href:"/forgot-password",target:"_blank",rel:"noopener noreferrer",className:l.forgotPassword,children:"Forgot password"}),e.jsx("button",{type:"submit",disabled:m.verifying,children:m.verifying?e.jsx(q,{width:18}):"sign in"}),e.jsxs("button",{type:"button",onClick:f,className:l.googleSignIn,children:[e.jsx(C,{}),e.jsx("span",{children:"Sign in with Google"})]})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(k,{to:"/sign-up",children:"sign up"})]})]})};export{D as default};
